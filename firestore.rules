rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Orders: frontend CANNOT read or write. Admin SDK (server) bypasses rules.
    match /orders/{orderId} {
      allow read: if false;  // Ninguém lê do frontend
      allow write: if false; // Apenas Admin SDK (server-side) deve escrever
    }

    // Explicitly deny frontend access to order-events and counters as well
    match /order-events/{eventId} {
      allow read: if false;
      allow write: if false;
    }

    match /counters/{counterId} {
      allow read: if false;
      allow write: if false;
    }

    // Keep test collection closed
    match /_test/{docId} {
      allow read, write: if false;
    }
  }
}
